<div *ngFor="let progressInfo of progressInfos" class="mb-2">
  <span>{{ progressInfo.fileName }}</span>
  <div class="progress">
    <div
      class="progress-bar progress-bar-info progress-bar-striped"
      role="progressbar"
      attr.aria-valuenow="{{ progressInfo.value }}"
      aria-valuemin="0"
      aria-valuemax="100"
      [ngStyle]="{ width: progressInfo.value + '%' }"
    >
      {{ progressInfo.value }}%
    </div>
  </div>
</div>

<div class="row">
  <div class="col-12">
    <div class="mb-3 buttons text-center">
      <button
        class="btn btn-outline-warning cart btn-sm me-1"
        onclick="document.getElementById('photoUpload').click()"
      >
        Upload Photos
      </button>
      <input
        class="form-control d-none"
        type="file"
        id="photoUpload"
        accept="image/*"
        (change)="onFileChange($event)"
      />
    </div>
  </div>
</div>

<button
  #openModal
  class="btn btn-link fw-bold d-none"
  data-bs-toggle="modal"
  data-bs-target="#exampleModal1"
  aria-expanded="false"
  role="button"
  type="submit"
>
  Launch demo modal
</button>

<!-- Modal -->
<div class="modal fade" id="exampleModal1" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">
          Crop image to select
        </h5>
        <button
          #closeModal
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <div class="col-12">
          <image-cropper
            #cropper
            class="card border p-1"
            style="margin-right: 3px"
            [imageChangedEvent]="imgChangeEvt"
            [maintainAspectRatio]="true"
            [autoCrop]="false"
            [aspectRatio]="width / height"
            [resizeToWidth]="256"
            format="png"
            (imageCropped)="cropImg($event)"
            (imageLoaded)="imgLoad()"
            (cropperReady)="initCropper()"
            (loadImageFailed)="imgFailed()"
          >
          </image-cropper>
        </div>
      </div>
      <div class="modal-footer justify-content-center">
        <button type="button" class="btn btn-primary" (click)="cropPhoto()">
          Crop & Select
        </button>
      </div>
    </div>
  </div>
</div>

<div class="upload card mt-2">
  <!-- <span
    >Your Prints: {{ previews.length }} photos selected.
    <p class="fw-bold">
      Total Price : {{ price }} X {{ previews.length }} =
      <span class="total rounded-3 p-1 mt-2"
        >Rs. {{ price * previews.length }}</span
      >
    </p>
  </span> -->
  <div
    class="
      row
      justify-content-center
      mx-2
      similar-products
      mt-2
      d-flex
      flex-row
    "
  >
    <div
      *ngFor="let preview of previews; let i = index"
      class="card col-2 border p-1"
      style="width: 9rem; margin-right: 3px"
    >
      <img [src]="preview" class="card-img-top" alt="..." />
      <div class="card-body">
        <h6 class="card-title">{{ i + 1 }} of {{ previews.length }}</h6>
      </div>
    </div>
    <!-- <div class="card border p-1" style="width: 9rem;margin-right: 3px;"> <img src="https://i.imgur.com/GwiUmQA.jpg" class="card-img-top" alt="...">
          <div class="card-body">
              <h6 class="card-title">2 of 6</h6>
          </div>
      </div>
      <div class="card border p-1" style="width: 9rem;margin-right: 3px;"> <img src="https://i.imgur.com/c9uUysL.jpg" class="card-img-top" alt="...">
          <div class="card-body">
              <h6 class="card-title">3 of 6</h6>
          </div>
      </div>
      <div class="card border p-1" style="width: 9rem;margin-right: 3px;"> <img src="https://i.imgur.com/kYWqL7k.jpg" class="card-img-top" alt="...">
          <div class="card-body">
              <h6 class="card-title">4 of 6</h6>
          </div>
      </div>
      <div class="card border p-1" style="width: 9rem;"> <img src="https://i.imgur.com/DhKkTrG.jpg" class="card-img-top" alt="...">
          <div class="card-body">
              <h6 class="card-title">5 of 6</h6>
          </div>
      </div> -->
  </div>
  <span class="mt-2"
    >Your Prints: {{ previews.length }} photos selected.
    <p class="fw-bold">
      Total Price : {{ price }} X {{ previews.length }} =
      <span class="total rounded-3 p-1 mt-2"
        >Rs. {{ price * previews.length | number: "1.2-2" }}</span
      >
    </p>
  </span>
  <!-- <div class="buttons  row justify-content-center"> 
    <button class="btn col-5 btn-outline-warning cart me-1">Add to Cart</button> 
    <button class="btn col-5 btn-warning buy">Buy it Now</button> 
    <button class="btn col-2 btn-light wishlist"> <i class="fa fa-heart"></i> </button>
  </div> -->
</div>

<div *ngIf="message.length" class="alert alert-secondary my-3" role="alert">
  <ul *ngFor="let msg of message; let i = index">
    <li>{{ msg }}</li>
  </ul>
</div>
<!-- 
<div class="card mt-3">
  <div class="card-header">List of Images</div>
  <ul
    class="list-group list-group-flush"
    *ngFor="let image of imageInfos | async"
  >
    <li class="list-group-item">
      <p><a href="{{ image.url }}">{{ image.name }}</a></p>
      <img src="{{ image.url }}" alt="{{ image.name }}" height="80px" />
    </li>
  </ul>
</div> -->

<!-- 
<div class="col-md-4">
  <h6>Image Preview</h6>
  <img [src]="cropImgPreview" />
</div> -->
